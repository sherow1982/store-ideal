<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="pageTitle">ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬ - Store Ideal</title>`n    <link rel="stylesheet" href="/style.css">
    <meta name="description" id="pageDescription" content="ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬">
    <link rel="canonical" id="pageCanonical" href="">
    
    <!-- Open Graph -->
    <meta property="og:title" id="ogTitle" content="">
    <meta property="og:description" id="ogDescription" content="">
    <meta property="og:image" id="ogImage" content="">
    <meta property="og:url" id="ogUrl" content="">
    <meta property="og:type" content="product">
    
    <style>
        :root {
            --color-cream-50: rgba(252, 252, 249, 1);
            --color-cream-100: rgba(255, 255, 253, 1);
            --color-gray-200: rgba(245, 245, 245, 1);
            --color-gray-300: rgba(167, 169, 169, 1);
            --color-slate-500: rgba(98, 108, 113, 1);
            --color-brown-600: rgba(94, 82, 64, 1);
            --color-charcoal-700: rgba(31, 33, 33, 1);
            --color-charcoal-800: rgba(38, 40, 40, 1);
            --color-slate-900: rgba(19, 52, 59, 1);
            --color-teal-300: rgba(50, 184, 198, 1);
            --color-teal-500: rgba(33, 128, 141, 1);
            --color-teal-600: rgba(29, 116, 128, 1);
            --color-teal-700: rgba(26, 104, 115, 1);
            --color-brown-600-rgb: 94, 82, 64;
            --color-teal-500-rgb: 33, 128, 141;
            --color-background: var(--color-cream-50);
            --color-surface: var(--color-cream-100);
            --color-text: var(--color-slate-900);
            --color-text-secondary: var(--color-slate-500);
            --color-primary: var(--color-teal-500);
            --color-primary-hover: var(--color-teal-600);
            --color-border: rgba(var(--color-brown-600-rgb), 0.2);
            --color-card-border: rgba(var(--color-brown-600-rgb), 0.12);
            --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.04);
            --radius-base: 8px;
            --radius-lg: 12px;
            --space-8: 8px;
            --space-12: 12px;
            --space-16: 16px;
            --space-20: 20px;
            --space-24: 24px;
            --space-32: 32px;
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --color-background: var(--color-charcoal-700);
                --color-surface: var(--color-charcoal-800);
                --color-text: var(--color-gray-200);
                --color-text-secondary: rgba(167, 169, 169, 0.7);
                --color-primary: var(--color-teal-300);
                --color-border: rgba(119, 124, 124, 0.3);
                --color-card-border: rgba(119, 124, 124, 0.2);
            }
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Cairo', sans-serif;
            background: var(--color-background);
            color: var(--color-text);
            line-height: 1.6;
        }

        .header {
            background: var(--color-surface);
            border-bottom: 1px solid var(--color-card-border);
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: var(--shadow-sm);
        }
        .header-top {
            background: var(--color-primary);
            color: white;
            padding: var(--space-8) 0;
            text-align: center;
            font-size: 14px;
        }
        .header-main {
            max-width: 1280px;
            margin: 0 auto;
            padding: var(--space-16) var(--space-20);
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: var(--space-20);
        }
        .logo {
            font-size: 24px;
            font-weight: 700;
            color: var(--color-primary);
            text-decoration: none;
            white-space: nowrap;
        }
        .search-bar { flex: 1; max-width: 600px; }
        .search-bar input {
            width: 100%;
            padding: var(--space-12) var(--space-16);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-base);
            font-size: 14px;
            background: var(--color-background);
            color: var(--color-text);
        }
        .header-actions { display: flex; gap: var(--space-16); align-items: center; }
        .icon-btn {
            background: none;
            border: none;
            cursor: pointer;
            padding: var(--space-8);
            color: var(--color-text);
            position: relative;
            font-size: 20px;
        }
        .badge {
            position: absolute;
            top: 0;
            left: 0;
            background: var(--color-primary);
            color: white;
            font-size: 11px;
            padding: 2px 6px;
            border-radius: 10px;
            font-weight: 600;
        }

        .nav {
            background: var(--color-surface);
            border-bottom: 1px solid var(--color-card-border);
        }
        .nav-container {
            max-width: 1280px;
            margin: 0 auto;
            padding: 0 var(--space-20);
            display: flex;
            gap: var(--space-32);
        }
        .nav-link {
            padding: var(--space-16) 0;
            color: var(--color-text);
            text-decoration: none;
            font-weight: 500;
            white-space: nowrap;
            transition: color 0.3s;
            border-bottom: 2px solid transparent;
        }
        .nav-link:hover { color: var(--color-primary); border-bottom-color: var(--color-primary); }

        .breadcrumb {
            max-width: 1280px;
            margin: 20px auto;
            padding: 0 20px;
            font-size: 14px;
            color: var(--color-text-secondary);
        }
        .breadcrumb a { color: var(--color-primary); text-decoration: none; }

        .container { max-width: 1280px; margin: 0 auto; padding: var(--space-32) var(--space-20); }

        .product-main { display: grid; grid-template-columns: 1fr 1fr; gap: 48px; margin-bottom: 48px; }

        .gallery { display: flex; flex-direction: column; gap: 16px; }
        .main-image {
            width: 100%;
            aspect-ratio: 1;
            object-fit: cover;
            border-radius: 12px;
            border: 1px solid var(--color-card-border);
        }
        .thumbnails { display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; }
        .thumbnail {
            aspect-ratio: 1;
            object-fit: cover;
            border-radius: 8px;
            cursor: pointer;
            border: 2px solid transparent;
            transition: border-color 0.3s;
        }
        .thumbnail:hover, .thumbnail.active { border-color: var(--color-primary); }

        .product-info h1 { font-size: 32px; margin-bottom: 16px; }
        .rating { display: flex; gap: 8px; align-items: center; margin-bottom: 16px; }
        .stars { color: #FFB800; }
        .price-section {
            margin: 24px 0;
            padding: 24px;
            background: var(--color-surface);
            border-radius: 12px;
            border: 1px solid var(--color-card-border);
        }
        .current-price { font-size: 36px; font-weight: 700; color: var(--color-primary); }
        .old-price {
            font-size: 20px;
            color: var(--color-text-secondary);
            text-decoration: line-through;
            margin-right: 12px;
        }
        .discount-badge {
            display: inline-block;
            background: #ff5555;
            color: white;
            padding: 4px 12px;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 600;
            margin-right: 12px;
        }

        .features-list { list-style: none; margin: 24px 0; }
        .features-list li { padding: 8px 0; padding-right: 24px; position: relative; }
        .features-list li:before {
            content: 'âœ“';
            position: absolute;
            right: 0;
            color: var(--color-primary);
            font-weight: 700;
        }

        .actions { display: flex; gap: 12px; margin: 32px 0; }
        .quantity {
            display: flex;
            align-items: center;
            gap: 12px;
            border: 1px solid var(--color-border);
            border-radius: 8px;
            padding: 8px 16px;
        }
        .quantity button {
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
            color: var(--color-text);
        }
        .add-to-cart-btn {
            flex: 1;
            background: var(--color-primary);
            color: white;
            border: none;
            padding: 16px;
            border-radius: 8px;
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
            transition: background 0.3s;
        }
        .add-to-cart-btn:hover { background: var(--color-primary-hover); }
        .buy-now-btn {
            background: #25D366;
            color: white;
            border: none;
            padding: 16px 32px;
            border-radius: 8px;
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
            transition: background 0.3s;
        }
        .buy-now-btn:hover { background: #1FA952; }

        .tabs { border-bottom: 1px solid var(--color-card-border); margin-bottom: 24px; }
        .tab-btn {
            background: none;
            border: none;
            padding: 16px 24px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            color: var(--color-text-secondary);
            border-bottom: 2px solid transparent;
            transition: all 0.3s;
        }
        .tab-btn.active { color: var(--color-primary); border-bottom-color: var(--color-primary); }
        .tab-content { display: none; }
        .tab-content.active { display: block; }

        .related-products { margin-top: 64px; }
        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 24px;
            margin-top: 24px;
        }
        .product-card {
            background: var(--color-surface);
            border: 1px solid var(--color-card-border);
            border-radius: 12px;
            overflow: hidden;
            cursor: pointer;
            transition: transform 0.3s;
        }
        .product-card:hover { transform: translateY(-4px); }
        .product-card img { width: 100%; aspect-ratio: 1; object-fit: cover; }
        .product-card-info { padding: 16px; }
        .product-card-name { font-weight: 600; margin-bottom: 8px; }
        .product-card-price { font-size: 20px; font-weight: 700; color: var(--color-primary); }

        /* Cart Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }
        .modal.active { display: flex; }
        .modal-content {
            background: var(--color-surface);
            border-radius: 12px;
            padding: 32px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }
        .modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; }
        .modal-title { font-size: 24px; font-weight: 700; }
        .close-modal { background: none; border: none; font-size: 24px; cursor: pointer; }
        .cart-item {
            display: flex;
            gap: 16px;
            padding: 16px;
            border: 1px solid var(--color-card-border);
            border-radius: 8px;
            margin-bottom: 12px;
        }
        .cart-item-image { width: 80px; height: 80px; object-fit: cover; border-radius: 8px; }
        .cart-item-info { flex: 1; }
        .cart-item-name { font-weight: 600; margin-bottom: 8px; }
        .cart-item-price { color: var(--color-primary); font-weight: 600; }
        .cart-total {
            font-size: 20px;
            font-weight: 700;
            text-align: left;
            margin: 24px 0;
            padding-top: 24px;
            border-top: 2px solid var(--color-card-border);
        }
        .checkout-btn {
            width: 100%;
            background: #25D366;
            color: white;
            border: none;
            padding: 16px;
            border-radius: 8px;
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
            transition: background 0.3s;
        }
        .checkout-btn:hover { background: #1FA952; }
        .empty-cart { text-align: center; padding: 32px; color: var(--color-text-secondary); }

        /* Footer */
        .footer {
            background: var(--color-surface);
            border-top: 1px solid var(--color-card-border);
            padding: 32px 20px;
            margin-top: 32px;
        }
        .footer-content {
            max-width: 1280px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 32px;
        }
        .footer-section h3 { margin-bottom: 16px; font-size: 18px; }
        .footer-links { list-style: none; }
        .footer-links li { margin-bottom: 8px; }
        .footer-links a { color: var(--color-text-secondary); text-decoration: none; transition: color 0.3s; }
        .footer-links a:hover { color: var(--color-primary); }
        .footer-bottom {
            text-align: center;
            margin-top: 32px;
            padding-top: 24px;
            border-top: 1px solid var(--color-card-border);
            color: var(--color-text-secondary);
            font-size: 14px;
        }

        @media (max-width: 768px) {
            .product-main { grid-template-columns: 1fr; gap: 32px; }
            .thumbnails { grid-template-columns: repeat(3, 1fr); }
            .search-bar { order: 3; width: 100%; flex-basis: 100%; }
        }
    </style>
</head>
<body>
    <div class="header-top">
        ğŸ‰ Ø¹Ø±Ø¶ Ø®Ø§Øµ: Ø®ØµÙ… ÙŠØµÙ„ Ø¥Ù„Ù‰ 50% Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª - Ù„ÙØªØ±Ø© Ù…Ø­Ø¯ÙˆØ¯Ø©!
    </div>

    <header class="header">
        <div class="header-main">
            <a href="../" class="logo">ğŸ›ï¸ Store Ideal</a>
            <div class="search-bar">
                <input type="search" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ù†ØªØ¬Ø§ØªÙƒ Ø§Ù„Ù…ÙØ¶Ù„Ø©...">
            </div>
            <div class="header-actions">
                <button class="icon-btn" onclick="toggleCart()" aria-label="Ø³Ù„Ø© Ø§Ù„ØªØ³ÙˆÙ‚">
                    ğŸ›’
                    <span class="badge" id="cartBadge">0</span>
                </button>
            </div>
        </div>
    </header>

    <nav class="nav">
        <div class="nav-container">
            <a href="../" class="nav-link">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
            <a href="../about.html" class="nav-link">Ø¹Ù† Ø§Ù„Ù…ØªØ¬Ø±</a>
            <a href="../contact.html" class="nav-link">Ø§ØªØµÙ„ Ø¨Ù†Ø§</a>
        </div>
    </nav>

    <div class="breadcrumb" id="breadcrumb">
        <a href="../">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a> / <a href="../">Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</a> / <span id="breadcrumbProduct">Ø§Ù„Ù…Ù†ØªØ¬</span>
    </div>

    <div class="container">
        <div class="product-main">
            <div class="gallery">
                <img id="mainImage" class="main-image" src="" alt="">
                <div class="thumbnails" id="thumbnails"></div>
            </div>

            <div class="product-info">
                <h1 id="productName"></h1>
                <div class="rating">
                    <span class="stars" id="stars"></span>
                    <span id="ratingText"></span>
                </div>

                <div class="price-section">
                    <div>
                        <span id="discountBadge"></span>
                        <span id="oldPrice" class="old-price"></span>
                    </div>
                    <div id="currentPrice" class="current-price"></div>
                </div>

                <p id="shortDescription"></p>

                <ul class="features-list" id="featuresList"></ul>

                <div class="actions">
                    <div class="quantity">
                        <button onclick="decreaseQty()">-</button>
                        <span id="quantity">1</span>
                        <button onclick="increaseQty()">+</button>
                    </div>
                    <button class="add-to-cart-btn" onclick="addToCartFromProduct()">ğŸ›’ Ø£Ø¶Ù Ù„Ù„Ø³Ù„Ø©</button>
                    <button class="buy-now-btn" onclick="buyNow()">ğŸ“± Ø§Ø´ØªØ±ÙŠ Ø§Ù„Ø¢Ù†</button>
                </div>

                <div style="margin-top: 24px; padding: 16px; background: var(--color-surface); border-radius: 8px; border: 1px solid var(--color-card-border);">
                    <p>âœ“ Ø´Ø­Ù† Ù…Ø¬Ø§Ù†ÙŠ Ù„Ù„Ø·Ù„Ø¨Ø§Øª ÙÙˆÙ‚ 200 Ø±ÙŠØ§Ù„</p>
                    <p>âœ“ Ø¥Ø±Ø¬Ø§Ø¹ Ù…Ø¬Ø§Ù†ÙŠ Ø®Ù„Ø§Ù„ 14 ÙŠÙˆÙ…</p>
                    <p>âœ“ Ø¶Ù…Ø§Ù† Ø§Ù„Ø¬ÙˆØ¯Ø©</p>
                </div>
            </div>
        </div>

        <div class="tabs">
            <button class="tab-btn active" onclick="switchTab('description')">Ø§Ù„ÙˆØµÙ Ø§Ù„ØªÙØµÙŠÙ„ÙŠ</button>
            <button class="tab-btn" onclick="switchTab('specs')">Ø§Ù„Ù…ÙˆØ§ØµÙØ§Øª</button>
            <button class="tab-btn" onclick="switchTab('reviews')">Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª</button>
        </div>

        <div id="description" class="tab-content active">
            <p id="fullDescription"></p>
        </div>

        <div id="specs" class="tab-content">
            <ul id="specsList"></ul>
        </div>

        <div id="reviews" class="tab-content">
            <p>Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª Ø³ØªÙƒÙˆÙ† Ù…ØªØ§Ø­Ø© Ù‚Ø±ÙŠØ¨Ø§Ù‹</p>
        </div>

        <div class="related-products">
            <h2>Ù…Ù†ØªØ¬Ø§Øª Ù…Ø´Ø§Ø¨Ù‡Ø©</h2>
            <div class="products-grid" id="relatedProducts"></div>
        </div>
    </div>

    <!-- Cart Modal -->
    <div class="modal" id="cartModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Ø³Ù„Ø© Ø§Ù„ØªØ³ÙˆÙ‚</h2>
                <button class="close-modal" onclick="toggleCart()">âœ•</button>
            </div>
            <div id="cartItems">
                <div class="empty-cart">
                    <p>Ø³Ù„Ø© Ø§Ù„ØªØ³ÙˆÙ‚ ÙØ§Ø±ØºØ©</p>
                    <p style="font-size: 48px; margin: 20px 0;">ğŸ›’</p>
                </div>
            </div>
            <div id="cartFooter" style="display: none;">
                <div class="cart-total">
                    Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: <span id="cartTotal">0</span> Ø±ÙŠØ§Ù„
                </div>
                <button class="checkout-btn" onclick="checkout()">
                    <span>Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨</span>
                    <span style="font-size: 20px;">ğŸ“±</span>
                </button>
            </div>
        </div>
    </div>

    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <h3>Ø¹Ù† Store Ideal</h3>
                <p>Ù†Ù…ÙˆØ°Ø¬ Ù…ØªØ¬Ø± Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø§Ø­ØªØ±Ø§ÙÙŠ Ù…ØªÙƒØ§Ù…Ù„ Ø¹Ù„Ù‰ GitHub Pages</p>
            </div>
            <div class="footer-section">
                <h3>Ø±ÙˆØ§Ø¨Ø· Ø³Ø±ÙŠØ¹Ø©</h3>
                <ul class="footer-links">
                    <li><a href="../about.html">Ø¹Ù† Ø§Ù„Ù…ØªØ¬Ø±</a></li>
                    <li><a href="../privacy.html">Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø®ØµÙˆØµÙŠØ©</a></li>
                    <li><a href="../terms.html">Ø´Ø±ÙˆØ· Ø§Ù„Ø®Ø¯Ù…Ø©</a></li>
                    <li><a href="../returns.html">Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø¥Ø±Ø¬Ø§Ø¹</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Ø®Ø¯Ù…Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</h3>
                <ul class="footer-links">
                    <li><a href="../contact.html">Ø§ØªØµÙ„ Ø¨Ù†Ø§</a></li>
                    <li><a href="../returns.html">Ø§Ù„Ø¥Ø±Ø¬Ø§Ø¹</a></li>
                    <li><a href="../terms.html">Ø§Ù„Ø´Ø­Ù† ÙˆØ§Ù„ØªÙˆØµÙŠÙ„</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§</h3>
                <ul class="footer-links">
                    <li><a href="mailto:info@store-ideal.com">ğŸ“§ info@store-ideal.com</a></li>
                    <li><a href="https://wa.me/966501234567">ğŸ“± +966 50 123 4567</a></li>
                    <li>ğŸ“ Ø§Ù„Ø±ÙŠØ§Ø¶ØŒ Ø§Ù„Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©</li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <p>Â© 2025 Store Ideal. Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©. | Ù…Ø¨Ù†ÙŠ Ø¨Ø­Ø¨ Ø¹Ù„Ù‰ GitHub Pages â¤ï¸</p>
        </div>
    </footer>

    <script>
        let currentProduct = null;
        let currentQty = 1;
        let cart = JSON.parse(localStorage.getItem('storeCart')) || [];
        const whatsappNumber = '966501234567';

        async function loadProduct() {
            const params = new URLSearchParams(window.location.search);
            const productId = parseInt(params.get('id'));

            try {
                const response = await fetch('../products.json');
                const data = await response.json();
                currentProduct = data.products.find(p => p.id === productId);

                if (!currentProduct) {
                    window.location.href = '../';
                    return;
                }

                displayProduct(currentProduct);
                updateMetaTags(currentProduct);
                displayRelatedProducts(data.products, currentProduct);
            } catch (error) {
                console.error('Error loading product:', error);
            }
        }

        function displayProduct(product) {
            document.getElementById('productName').textContent = product.name;
            document.getElementById('breadcrumbProduct').textContent = product.name;
            document.getElementById('stars').textContent = 'â˜…'.repeat(Math.floor(product.rating)) + 'â˜†'.repeat(5 - Math.floor(product.rating));
            document.getElementById('ratingText').textContent = `${product.rating} (${product.reviews} ØªÙ‚ÙŠÙŠÙ…)`;
            
            if (product.oldPrice) {
                const discount = Math.round(((product.oldPrice - product.price) / product.oldPrice) * 100);
                document.getElementById('discountBadge').innerHTML = `<span class="discount-badge">Ø®ØµÙ… ${discount}%</span>`;
                document.getElementById('oldPrice').textContent = `${product.oldPrice} Ø±ÙŠØ§Ù„`;
            }
            
            document.getElementById('currentPrice').textContent = `${product.price} Ø±ÙŠØ§Ù„`;
            document.getElementById('shortDescription').textContent = product.description;
            
            if (product.features) {
                document.getElementById('featuresList').innerHTML = product.features.map(f => `<li>${f}</li>`).join('');
            }

            document.getElementById('mainImage').src = product.image;
            document.getElementById('mainImage').alt = product.name;

            const images = product.images || [product.image, product.image, product.image, product.image];
            document.getElementById('thumbnails').innerHTML = images.map((img, i) => 
                `<img src="${img}" class="thumbnail ${i === 0 ? 'active' : ''}" onclick="changeImage('${img}', this)">`
            ).join('');

            document.getElementById('fullDescription').textContent = product.fullDescription || product.description;
            
            if (product.specifications) {
                document.getElementById('specsList').innerHTML = Object.entries(product.specifications)
                    .map(([key, value]) => `<li><strong>${key}:</strong> ${value}</li>`).join('');
            }
        }

        function updateMetaTags(product) {
            document.title = `${product.name} - Store Ideal`;
            document.getElementById('pageTitle').textContent = `${product.name} - Store Ideal`;
            document.getElementById('pageDescription').content = product.description;
            document.getElementById('pageCanonical').href = window.location.href;
            document.getElementById('ogTitle').content = product.name;
            document.getElementById('ogDescription').content = product.description;
            document.getElementById('ogImage').content = product.image;
            document.getElementById('ogUrl').content = window.location.href;

            const schema = {
                "@context": "https://schema.org",
                "@type": "Product",
                "name": product.name,
                "image": product.image,
                "description": product.description,
                "sku": product.sku || `PROD-${product.id}`,
                "brand": { "@type": "Brand", "name": "Store Ideal" },
                "offers": {
                    "@type": "Offer",
                    "url": window.location.href,
                    "priceCurrency": "SAR",
                    "price": product.price,
                    "availability": "https://schema.org/InStock"
                },
                "aggregateRating": {
                    "@type": "AggregateRating",
                    "ratingValue": product.rating,
                    "reviewCount": product.reviews
                }
            };
            
            const script = document.createElement('script');
            script.type = 'application/ld+json';
            script.textContent = JSON.stringify(schema);
            document.head.appendChild(script);
        }

        function displayRelatedProducts(allProducts, current) {
            const related = allProducts
                .filter(p => p.category === current.category && p.id !== current.id)
                .slice(0, 4);
            
            document.getElementById('relatedProducts').innerHTML = related.map(p => `
                <div class="product-card" onclick="window.location.href='?id=${p.id}'">
                    <img src="${p.image}" alt="${p.name}">
                    <div class="product-card-info">
                        <div class="product-card-name">${p.name}</div>
                        <div class="product-card-price">${p.price} Ø±ÙŠØ§Ù„</div>
                    </div>
                </div>
            `).join('');
        }

        function changeImage(src, thumb) {
            document.getElementById('mainImage').src = src;
            document.querySelectorAll('.thumbnail').forEach(t => t.classList.remove('active'));
            thumb.classList.add('active');
        }

        function switchTab(tabName) {
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            event.target.classList.add('active');
            document.getElementById(tabName).classList.add('active');
        }

        function increaseQty() {
            currentQty++;
            document.getElementById('quantity').textContent = currentQty;
        }

        function decreaseQty() {
            if (currentQty > 1) {
                currentQty--;
                document.getElementById('quantity').textContent = currentQty;
            }
        }

        function addToCartFromProduct() {
            const existingItem = cart.find(item => item.id === currentProduct.id);
            if (existingItem) {
                existingItem.quantity += currentQty;
            } else {
                cart.push({ ...currentProduct, quantity: currentQty });
            }
            localStorage.setItem('storeCart', JSON.stringify(cart));
            updateCartUI();
            alert(`ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© ${currentQty} Ù…Ù† ${currentProduct.name} Ù„Ù„Ø³Ù„Ø©`);
        }

        function buyNow() {
            const message = `ğŸ›ï¸ *Ø·Ù„Ø¨ Ù…Ù† Store Ideal*\n\n*Ø§Ù„Ù…Ù†ØªØ¬:* ${currentProduct.name}\n*Ø§Ù„Ø³Ø¹Ø±:* ${currentProduct.price} Ø±ÙŠØ§Ù„\n*Ø§Ù„ÙƒÙ…ÙŠØ©:* ${currentQty}\n*Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹:* ${currentProduct.price * currentQty} Ø±ÙŠØ§Ù„\n\nØ£Ø±Ø¬Ùˆ ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨ ÙˆØ¥Ø±Ø³Ø§Ù„ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØªÙˆØµÙŠÙ„.`;
            window.open(`https://wa.me/${whatsappNumber}?text=${encodeURIComponent(message)}`, '_blank');
        }

        function updateCartUI() {
            const badge = document.getElementById('cartBadge');
            const itemsContainer = document.getElementById('cartItems');
            const cartFooter = document.getElementById('cartFooter');
            const totalElement = document.getElementById('cartTotal');
            
            badge.textContent = cart.reduce((sum, item) => sum + item.quantity, 0);
            
            if (cart.length === 0) {
                itemsContainer.innerHTML = `<div class="empty-cart"><p>Ø³Ù„Ø© Ø§Ù„ØªØ³ÙˆÙ‚ ÙØ§Ø±ØºØ©</p><p style="font-size: 48px; margin: 20px 0;">ğŸ›’</p></div>`;
                cartFooter.style.display = 'none';
            } else {
                itemsContainer.innerHTML = cart.map(item => `
                    <div class="cart-item">
                        <img src="${item.image}" alt="${item.name}" class="cart-item-image">
                        <div class="cart-item-info">
                            <div class="cart-item-name">${item.name}</div>
                            <div class="cart-item-price">${item.price} Ø±ÙŠØ§Ù„ Ã— ${item.quantity}</div>
                        </div>
                    </div>
                `).join('');
                const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
                totalElement.textContent = total.toFixed(2);
                cartFooter.style.display = 'block';
            }
        }

        function toggleCart() {
            document.getElementById('cartModal').classList.toggle('active');
        }

        function checkout() {
            if (cart.length === 0) return;
            let message = 'ğŸ›ï¸ *Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ Ù…Ù† Store Ideal*\n\n*Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª:*\n';
            cart.forEach((item, index) => {
                message += `${index + 1}. ${item.name}\n   Ø§Ù„Ø³Ø¹Ø±: ${item.price} Ø±ÙŠØ§Ù„\n   Ø§Ù„ÙƒÙ…ÙŠØ©: ${item.quantity}\n\n`;
            });
            const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            message += `*Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙƒÙ„ÙŠ:* ${total.toFixed(2)} Ø±ÙŠØ§Ù„\n\nØ£Ø±Ø¬Ùˆ ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨ ÙˆØ¥Ø±Ø³Ø§Ù„ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØªÙˆØµÙŠÙ„.`;
            window.open(`https://wa.me/${whatsappNumber}?text=${encodeURIComponent(message)}`, '_blank');
        }

        document.getElementById('cartModal').addEventListener('click', (e) => {
            if (e.target.id === 'cartModal') toggleCart();
        });

        loadProduct();
        updateCartUI();
    </script>
</body>
</html>
